language: java
sudo: required
services:
- docker
jdk:
- openjdk8
branches:
  only:
  - master
  - develop
os:
- linux
install: true
script: mvn -q clean install
before_deploy:
- bash ./ci/before_deploy.sh
deploy:
  provider: script
  script: bash ./ci/deploy.sh
  on:
    branch: master
    tags: true
cache:
  directories:
  - "$HOME/.m2"
notifications:
  email: dev-notify@lockss.org
before_install:
- openssl aes-256-cbc -K $encrypted_ba14223c04c8_key -iv $encrypted_ba14223c04c8_iv
  -in ci/codesigning.asc.enc -out ci/codesigning.asc -d
env:
  global:
  - secure: CUaolBu1oHKts5JRBp/CMNUoKGlKJ6RQBd398z3cmfa3T7UAc6OP9cnOeGiscmOJ0KspJBglrMjZhsMYohj0nhYtwLreTPY+JjQjb2mnMGOwJspY3/PEF0VyuFkEBJwemi8lGYPNrxu7j5Bi/Z7WB2IbI3NkRVoVfhbmOL+kxWPpPQ+RhArrjcSSLL5+AXOCvi3GlQf7YkDIHMbdhb045+H4rMnkfvAU8AlbH1vcPzDN2h+f/HZ9oyzW1yJsnpVPUQOBd4VOordriMpZOU7UnAg8IjsjxFYRYezuCGicOftk54Fy/eYA6voZAmmkQjgeffSx198f8OuM6R3ZmBFDwsTgAVpTrIpljHbnkFXd5UpCrwoHSPMHh5tDrMKgWkyccAeOfAmHNoF870Os/dikKqbi8nUgnONPe+6QeKbuHLxU2OP+ktKnk4EgJMhWFb7ubWCEVjZdQJVDWLz1Pe4XVO60gUBcNscO5ntzo60+EyDsBi1VaWxETOPMis1IacG7J6zSViC3M+Ka9jWaUBPNOj9e8M05EIbqYOrTynuoCxTPp6dU95+CsvhjODcixOiojObk2V3/7uJhcsbcSaSnlEhGh7ABplDkLEV/QeklWA6vG5XFUmNB8lmHlA3RLQS5sm8MdHHGSs+bFf49FP7MyCh6GyhfAnPTinseawTwDV4=
  - secure: Rr4Y69FRCoeGHxNP8hsyU2I6+wC/3jnDla9yKrsfwUOnKBCCeRgyvr4Az9ZV7ygioplK+x6ubBy0pTFCWMj2ctx1Jb6Kljt3hyA4XneJdf9H39/NWsryjlSfTMRD5il6RJEQxadqOtH3wKdwKo46lOcPImCiIBIYVKotXsSA4UCRqjvmz7RxK9whhf8OzRE6tuy3pObS5znnVzZEJ1rCO7qeC7sjQJmRMYz78b6R/Vdik1+hPTTB9TJJQoDmC7i3/VevQnP6zE67RXzMT4CEIy9SM3PHAlkuZD9a//OJIk856lkdTBi4ezip3kHJ5VPm2sLq51xGhnHtVlQ1BPQMh3ogp+EQQL+Dns1XGTd+46cJF3CjA2W1Xa6TsoRhmcrEMzo2Owf2kW95gFrkKaUGyR9A/jVJQWheu9UJYOBrtVtfgRf5/1iIGxzkyauhMKJNxms70DeQ1NLXV97Wu/8/kXTojCouKGS/QwWESP9A3NkY1S6RZoi++uDv07HDto4+Kgvah+lOcqZ1XO5NYKxIdW1JzTCyF+LDwIP//U229FKIFAJ7YXvFitIl6I27lFOmmg9FwD+RBY0lHV9bsLbQD4Rhpq0B0bK322H9S/cnnAmmwXvBHoKDaQcbwvvPVyNP75vl3zw2hXQO76rBKY8sqpSW8zBrsACF8MX3M+AMtN8=
  - secure: AmwNoIYsdN5NepKeiiuAYOVXkTQSTdztzpxUm0XTgxx/dQrRGCzthnTEffqdccCLyJczl+AAubrPsMf5iazeibRSqsu7/2NFL9I3TcqpySdFHtZGY4HOe3XSJFaI0rQj9AMPiwrf30+JvTOeiCGPXTnvJqHSM5IJ5vI9zbjHAO41vv3HQPt65pbT91m+WHWUqxKsUysJoNCDSjnSc4kajurs/2ZhR8fmS/bH4Vbgqlx4rhyh1MLgMIveFBmAp6rCPTnt46+HRHvT8UGn2U3ZojteTIsvGV8brcJfAANBfe9LeHEGHf7ORrSJhYEAyeJlaxarIuRu8kLMp+Ym9kpuJidnt6cWSO9+fd4AL4GM8cgCPntcgtYWP2AgU6jMBulAyH1DObTYdkXgaTkZKlxNtLdE27xMsyyLCtGQd/okETZqRmI/vhlBwiAdN47lB1veh+BohJp8gvLjpWWds7inqk6ryI01P/0QA0TXDZfx9ZRn/+oK8zhH07VYtRzzeyS97FBkCpeLoK8xIA3yKyHwhMMj0Un/jtSLHtBGVU00YgvKqNy7Md1RK+aH2U2om5mo8DV78jn4U6n4fi5yCorbfKG42RU2OIvYOGe4LI3zJqxiHtUYmXfge+LdCaGS95z+oLG66Lf1VTkr4t/GjOvib5juS/R3prx4pwNfSIKxSkc=
  - secure: C8MjBI6Pl18z1MuA9vgkqsClrxkOJIjPEfdr3Opt++UGMbUSbyqUkJopuyrsXQaW0zd7cOaSbiSu4nPYKm7M0H/q6yn1YzwbuHQNaY5+u2eMmB+D88slv3horvu6Tp4WUE7juw37qE/AYF6um9SMdPrEBIaEvpmYI2mtio72y00u9RuPFM4zzH/Ea0LoVoJgudBk8AC2dZcjDculhbMeAl0gb7VQsscc47FDqJi8QPz2zm3dL6JU3hjNc1LC49TY+dHq0y8nNfD5dDzqe7C+KLzEJssvdgIiy2foC1hRaHu0QWnor4Ya6X/+85eBn+SMu3jH5J9L4qUb8tm+SQYbrVgBWFDqIOGv5q55nvLD3aBGJW0nevJqsraogHiBFTD2Lx/qlczTgwyZ5sFFCKZsIPCOjjXLDxuy0byRnssVfsnMqWSsusMrb65+tXsmSraPCckrXD2IPBrIfSq/IqhvkOnrYuvi77knYFD9qtZQj3WDTQ9l58U4B8OePdkGWk/HuAwFT46XKfwyzuRkn/+ibMZ/ljLnIxdjDypatUSg18QafurxsPBX1q77KQoDspIOFzw8e3g4ptxRr9WC43ZtKat9vX5z9RSZkeTPY+IfhrGj8y4i+9D7fEVTVbhhUxtBZUBwzQc/WfltfRM+LjIsbtKb1JC8L2WrUgLstuCZBm4=
  - secure: ZKY1u7ARz6qDrpKIFXfuZ1Yc304krBPmw4fT89zhTlLgxWL3mDmEquV+CfOefsG1oviW2frKk7jOEzh7sJhkMHeT4nOUgNNov4YTZKFNlWWSsNJfTPZHfDq7IbvIsYG5smncQvbLevoXPo+fv2IIBbnOm1WM/WZKcCMYpflilx5byEFAbKexlHBlq4/hd83B3lJ7g/PRFs/0Gbv7QDHCeu9kwjXpfpiejaH8dlODDYv62+BXsGfUrdJtR3667XhKkcZbUwsBJL8LEGGA+yt0PTwvIH9XUYi8uUpIwBHw3sW+du1LMJXanQzaSyPPLnov59WAO6HA4vra76ve6zvKuyNun1JFXvaR6xMNDo6kqNHSflfbIUdyKG1hxN7gI1N6MapWmUW7rO4rJM8SnA3vufrq6vjDFwiSDHhU+TFHpp+iH7gWvdYrPpfILOAq53ILrTmOdRi1OpD5KOxhtKhKYEBT8Z9yuR1Sf+VKvl01AsqUNhtstEn8rczRAltZ0/4rHbTwwKer6lCdP89D7RQGtohKfgn0dpLbZI8jv7QE9s4VXiaICxCrlNwIuEPi/L0h6n8cpx4oa3FbsQJ4mFKriKEO7Mn91LBN01dHxeBMQ5UMIso1EciETox7WDw6ReHIxmuotpOW1lvV+856b14ZTqgXiLQjjsPUNoa2/1Si3sg=
  - secure: KvjD0LPgyov6iWXH76LkpmteSNHR3OltkEJt17TrIjE5RLdkWqWVciw+Q6Efn14VnFnHjXJ7yX6LdUXOm0AGMkE2u4S9LVlauSJqKkuJI4yF2EHVUDNKX3UhkaDzAWP0FD42oMdLiCtN4SisLQ0jju39io0ZhnXqyYOrngESzH0C6NdTaM8S6xb12ckx8cjICEhADj/biVE85d8/l6ws4KnlCsqBmihcZUONQZsVpHx0pSQfoXh77lv2hQhYSgvx6Iabx4B29CDGBmaUOc9+tIP7JHE2py4OJU43WfXAFrpxUYAbuwXmeSRyPZKu8zmXDJTEKdsY3GDP/DkTD6yCG8DVR4EJorWGvMNK2dCB12+zQSDkV/tKeoeoDsizcqCRidEYdw/e/c/ckPRpmjtl+NYnR1JznuR5/7YaCFkUMUHkm+zPJdwDKuXk+HAE8D0A0szcWXkRx2X1JqpRHKA0WLn3EcZqVInP5hPmtnh9IL2BRM67bMdyDLWsrCN2DUtzqq0iwKSzlnFsWvhvAw6vb/8HuNImt/SvwbqKb/xYMOAfl8v6OJ578ZAHxTDe255ey4uQbb/x1b2ANqUgKq72Y+KFefL8YC3RXeLHXHDE/CwO2Cl8riPN9ul9l8vtqnJuftrLcPKBTGhQG4rWl+T4anx4NmmcY0ZDuJuu8kNmXrU=
